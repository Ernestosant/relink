---
import { findLinkByCode, recordClick } from '../utils/links.js';

// Obtener el c칩digo corto desde los par치metros
const { shortCode } = Astro.params;

// Buscar el enlace en la base de datos
const link = await findLinkByCode(shortCode);

// Si no existe el enlace, redirigir a la p치gina principal
if (!link) {
  return Astro.redirect('/');
}

// Registrar el clic
await recordClick(link.id, Astro.request);

// Redirigir al enlace original
return Astro.redirect(link.originalUrl);
---

<!-- Esta p치gina nunca se renderiza porque siempre redirige -->
<div></div> 